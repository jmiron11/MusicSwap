var MongoClient = require('mongodb').MongoClient,
    assert = require('assert');
var url = 'mongodb://localhost:27017/test';

var insertProfileHelper = function(db, username, band1, band2, band3, callback){
    var collection = db.collection('profiles');

    collection.insertOne({
        "username" : username,
        "band1" : band1,
        "band2" : band2,
        "band3" : band3
    }, function(err, result) {
        assert.equal(err, null);
        console.log("Inserted in a profile");
        callback(result);
    });
};

var insertProfile = function(username, band1, band2, band3){
    MongoClient.connect(url, function(err, db) {
        assert.equal(null, err);
        console.log("Connected correctly to server");

        insertProfileHelper(db, username, band1, band2, band3 function() {
            db.close();
        });
    });
};
